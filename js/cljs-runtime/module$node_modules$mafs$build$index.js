import "./cljs_env.js";
shadow$provide.module$node_modules$mafs$build$index=function(global,require,module,exports){function useCoordinateContext(){const context=React.useContext(CoordinateContext);(0,import_tiny_invariant.default)(context,"CoordinateContext is not loaded. Are you rendering a Mafs component outside of Mafs?");return context}function round(value,precision){precision=Math.pow(10,(void 0===precision?0:precision)||0);return Math.round(value*precision)/precision}function range(min,max,step){step=void 0===step?
1:step;const result=[];for(;min<max-step/2;min+=step)result.push(min);min=result[result.length-1]+step;Math.abs(max-min)<step/1E-6?result.push(max):result.push(min);return result}function usePaneContext(){return React2.useContext(PaneContext)}function PaneManager($jscomp$destructuring$var0){({children:$jscomp$destructuring$var0}=$jscomp$destructuring$var0);const {xMin,xMax,yMin,yMax}=useCoordinateContext(),xPaneSize=2**round2(log2(xMax-xMin)-1),yPaneSize=2**round2(log2(yMax-yMin)-1),xLowerBound=xPaneSize*
floor(xMin/xPaneSize-.125),xUpperBound=xPaneSize*ceil(xMax/xPaneSize+.125),yLowerBound=yPaneSize*floor(yMin/yPaneSize-.125),yUpperBound=yPaneSize*ceil(yMax/yPaneSize+.125),xPanes=React2.useMemo(()=>range(xLowerBound,xUpperBound-xPaneSize,xPaneSize).map(xMin2=>[xMin2,xMin2+xPaneSize]),[xLowerBound,xUpperBound,xPaneSize]),yPanes=React2.useMemo(()=>range(yLowerBound,yUpperBound-yPaneSize,yPaneSize).map(yMin2=>[yMin2,yMin2+yPaneSize]),[yLowerBound,yUpperBound,yPaneSize]),context=React2.useMemo(()=>({xPanes,
yPanes,xPaneRange:[xLowerBound,xUpperBound],yPaneRange:[yLowerBound,yUpperBound]}),[xPanes,yPanes,xLowerBound,xUpperBound,yLowerBound,yUpperBound]);return(0,import_jsx_runtime.jsx)(PaneContext.Provider,{value:context,children:$jscomp$destructuring$var0})}function matrixCreate(a,b,c,d,tx,ty){return[void 0===a?1:a,void 0===c?0:c,void 0===tx?0:tx,void 0===b?0:b,void 0===d?1:d,void 0===ty?0:ty]}function useTransformContext(){const context=React3.useContext(TransformContext);(0,import_tiny_invariant2.default)(context,
"TransformContext is not loaded. Are you rendering a Mafs component outside of a MafsView?");return context}function useSpanContext(){const context=React4.useContext(SpanContext);(0,import_tiny_invariant3.default)(context,"SpanContext is not defined");return context}function useCamera($jscomp$destructuring$var1){var {minZoom,maxZoom}=$jscomp$destructuring$var1;const [matrix,setMatrix]=React5.useState(vec.identity),initialMatrix=React5.useRef(vec.identity);return{matrix,setBase(){initialMatrix.current=
matrix},move($jscomp$destructuring$var2){var {zoom,pan}=$jscomp$destructuring$var2,$jscomp$nullish$tmp0;$jscomp$destructuring$var2=1/(null!=($jscomp$nullish$tmp0=null==zoom?void 0:zoom.scale)?$jscomp$nullish$tmp0:1);var $jscomp$nullish$tmp1;$jscomp$nullish$tmp0=null!=($jscomp$nullish$tmp1=null==zoom?void 0:zoom.at)?$jscomp$nullish$tmp1:[0,0];$jscomp$nullish$tmp1=initialMatrix.current[0];$jscomp$destructuring$var2=Math.min(Math.max($jscomp$destructuring$var2,1/maxZoom/$jscomp$nullish$tmp1),1/minZoom/
$jscomp$nullish$tmp1);$jscomp$destructuring$var2=vec.matrixBuilder(initialMatrix.current).translate(...vec.scale($jscomp$nullish$tmp0,-1)).scale($jscomp$destructuring$var2,$jscomp$destructuring$var2).translate(...vec.scale($jscomp$nullish$tmp0,1)).translate(...(null!=pan?pan:[0,0])).get();setMatrix($jscomp$destructuring$var2)}}}function useWheelEnabler(zoomEnabled){const [wheelEnabled,setWheelEnabled]=React6.useState(!1),timer=React6.useRef(0);React6.useEffect(()=>{function handleWindowScroll(){setWheelEnabled(!1);
clearTimeout(timer.current);timer.current=setTimeout(()=>{setWheelEnabled(!0)},500)}if(zoomEnabled)return window.addEventListener("scroll",handleWindowScroll),()=>window.removeEventListener("scroll",handleWindowScroll)},[zoomEnabled]);return{wheelEnabled:zoomEnabled?wheelEnabled:!1,handleMouseMove(){setWheelEnabled(!0)}}}function Mafs($jscomp$destructuring$var3){function mapGesturePoint(point){var el=rootRef.current;(0,import_tiny_invariant4.default)(el,"SVG is not mounted");(0,import_tiny_invariant4.default)(inverseViewTransform,
"View transform is not invertible");el=el.getBoundingClientRect();return vec.transform([point[0]-el.left+viewBoxX,point[1]-el.top+viewBoxY],inverseViewTransform)}var {width:desiredWidth="auto",height=500,pan=!0,zoom=!1,viewBox={x:[-3,3],y:[-3,3]},preserveAspectRatio="contain",children,ssr=!1}=$jscomp$destructuring$var3;const [visible,setVisible]=React7.useState(ssr?!0:!1);$jscomp$destructuring$var3="auto"===desiredWidth?"100%":`${desiredWidth}px`;const rootRef=React7.useRef(null),{width=ssr?500:1}=
(0,import_use_resize_observer.default)({ref:rootRef});React7.useEffect(()=>{setVisible(!0)},[]);var minZoom=1;let maxZoom=1;"object"===typeof zoom?((0,import_tiny_invariant4.default)(0<zoom.min&&1>=zoom.min,"zoom.min must be in the range (0, 1]"),(0,import_tiny_invariant4.default)(1<=zoom.max,"zoom.max must be in the range [1, ∞)"),minZoom=zoom.min,maxZoom=zoom.max):zoom&&(minZoom=.5,maxZoom=5);const camera=useCamera({minZoom,maxZoom});var $jscomp$nullish$tmp3;minZoom=null!=($jscomp$nullish$tmp3=
null==viewBox?void 0:viewBox.padding)?$jscomp$nullish$tmp3:.5;var $jscomp$optchain$tmp940153231$4,$jscomp$nullish$tmp4;let xMin=(null!=($jscomp$nullish$tmp4=null==viewBox?void 0:null==($jscomp$optchain$tmp940153231$4=viewBox.x)?void 0:$jscomp$optchain$tmp940153231$4[0])?$jscomp$nullish$tmp4:0)-minZoom,$jscomp$optchain$tmp940153231$6,$jscomp$nullish$tmp5,xMax=(null!=($jscomp$nullish$tmp5=null==viewBox?void 0:null==($jscomp$optchain$tmp940153231$6=viewBox.x)?void 0:$jscomp$optchain$tmp940153231$6[1])?
$jscomp$nullish$tmp5:0)+minZoom,$jscomp$optchain$tmp940153231$8,$jscomp$nullish$tmp6,yMin=(null!=($jscomp$nullish$tmp6=null==viewBox?void 0:null==($jscomp$optchain$tmp940153231$8=viewBox.y)?void 0:$jscomp$optchain$tmp940153231$8[0])?$jscomp$nullish$tmp6:0)-minZoom,$jscomp$optchain$tmp940153231$10,$jscomp$nullish$tmp7,yMax=(null!=($jscomp$nullish$tmp7=null==viewBox?void 0:null==($jscomp$optchain$tmp940153231$10=viewBox.y)?void 0:$jscomp$optchain$tmp940153231$10[1])?$jscomp$nullish$tmp7:0)+minZoom;
"contain"===preserveAspectRatio&&($jscomp$nullish$tmp3=width/height,(xMax-xMin)/(yMax-yMin)>$jscomp$nullish$tmp3?($jscomp$optchain$tmp940153231$4=(yMax+yMin)/2,$jscomp$nullish$tmp3=(xMax-xMin)/$jscomp$nullish$tmp3/2,yMin=$jscomp$optchain$tmp940153231$4-$jscomp$nullish$tmp3,yMax=$jscomp$optchain$tmp940153231$4+$jscomp$nullish$tmp3):($jscomp$optchain$tmp940153231$4=(xMax+xMin)/2,$jscomp$nullish$tmp3=(yMax-yMin)*$jscomp$nullish$tmp3/2,xMin=$jscomp$optchain$tmp940153231$4-$jscomp$nullish$tmp3,xMax=$jscomp$optchain$tmp940153231$4+
$jscomp$nullish$tmp3));[xMin,yMin]=vec.transform([xMin,yMin],camera.matrix);[xMax,yMax]=vec.transform([xMax,yMax],camera.matrix);const xSpan=xMax-xMin,ySpan=yMax-yMin;$jscomp$nullish$tmp3=React7.useMemo(()=>{const scaleX=round(1/xSpan*width,5),scaleY=round(-1/ySpan*height,5);return vec.matrixBuilder().scale(scaleX,scaleY).get()},[height,width,xSpan,ySpan]);const viewBoxX=round(xMin/(xMax-xMin)*width,10),viewBoxY=round(yMax/(yMin-yMax)*height,10),inverseViewTransform=vec.matrixInvert($jscomp$nullish$tmp3),
pickupOrigin=React7.useRef([0,0]),pickupPoint=React7.useRef([0,0]),wheelEnabler=useWheelEnabler(!!zoom);(0,import_react.useGesture)({onDrag:$jscomp$destructuring$var4=>{var {movement,first,event,type,pinching,memo=[0,0]}=$jscomp$destructuring$var4;if(pinching)return movement;first&&camera.setBase();const [mx,my]=vec.sub(movement,memo);camera.move({pan:[-mx/width*xSpan,my/height*ySpan]});($jscomp$destructuring$var4=type.includes("key"))&&(null==event||event.preventDefault());return!$jscomp$destructuring$var4&&
first?movement:memo},onPinch:$jscomp$destructuring$var5=>{var {first,movement:[scale],origin,event,last}=$jscomp$destructuring$var5;event.currentTarget&&inverseViewTransform&&(first&&(camera.setBase(),pickupOrigin.current=origin,pickupPoint.current=pan?mapGesturePoint(origin):[(xMin+xMax)/2,(yMin+yMax)/2]),$jscomp$destructuring$var5=[0,0],pan&&($jscomp$destructuring$var5=vec.transform(vec.sub(origin,pickupOrigin.current),inverseViewTransform)),camera.move({zoom:{at:pickupPoint.current,scale},pan:vec.scale($jscomp$destructuring$var5,
-1)}),last&&camera.setBase())},onWheel:$jscomp$destructuring$var6=>{var {pinching,event,delta:[,scroll]}=$jscomp$destructuring$var6;if(!pinching){$jscomp$destructuring$var6=2/(1+Math.exp(-scroll/300));var point=mapGesturePoint([event.clientX,event.clientY]);camera.setBase();camera.move({zoom:{at:point,scale:1/$jscomp$destructuring$var6}})}},onKeyDown:$jscomp$destructuring$var7=>{({event:$jscomp$destructuring$var7}=$jscomp$destructuring$var7);if(!$jscomp$destructuring$var7.metaKey){var $jscomp$nullish$tmp8,
base=null!=($jscomp$nullish$tmp8={Equal:1,Minus:-1}[$jscomp$destructuring$var7.code])?$jscomp$nullish$tmp8:0;if(base){$jscomp$nullish$tmp8=.1;if($jscomp$destructuring$var7.altKey||$jscomp$destructuring$var7.metaKey)$jscomp$nullish$tmp8=.01;$jscomp$destructuring$var7.shiftKey&&($jscomp$nullish$tmp8=.3);$jscomp$destructuring$var7=1+base*$jscomp$nullish$tmp8;$jscomp$nullish$tmp8=[(xMax+xMin)/2,(yMax+yMin)/2];camera.setBase();camera.move({zoom:{at:$jscomp$nullish$tmp8,scale:$jscomp$destructuring$var7}})}}},
onMouseMove:()=>{wheelEnabler.handleMouseMove()}},{drag:{enabled:pan,eventOptions:{passive:!1}},pinch:{enabled:!!zoom,eventOptions:{passive:!1}},wheel:{enabled:wheelEnabler.wheelEnabled,preventDefault:!0,eventOptions:{passive:!1}},target:rootRef});$jscomp$optchain$tmp940153231$4=vec.toCSS($jscomp$nullish$tmp3);$jscomp$nullish$tmp4=React7.useMemo(()=>({xMin,xMax,yMin,yMax,height,width}),[xMin,xMax,yMin,yMax,height,width]);return(0,import_jsx_runtime2.jsx)("div",{className:"MafsView",style:{width:$jscomp$destructuring$var3},
tabIndex:pan||zoom?0:-1,ref:rootRef,children:(0,import_jsx_runtime2.jsx)(CoordinateContext_default.Provider,{value:$jscomp$nullish$tmp4,children:(0,import_jsx_runtime2.jsx)(SpanContext.Provider,{value:{xSpan,ySpan},children:(0,import_jsx_runtime2.jsx)(TransformContext.Provider,{value:{userTransform:vec.identity,viewTransform:$jscomp$nullish$tmp3},children:(0,import_jsx_runtime2.jsx)(PaneContext_default,{children:(0,import_jsx_runtime2.jsx)("svg",{width,height,viewBox:`${viewBoxX} ${viewBoxY} ${width} ${height}`,
preserveAspectRatio:"xMidYMin",style:Object.assign({},{width:$jscomp$destructuring$var3,touchAction:pan?"none":"auto"},{"--mafs-view-transform":$jscomp$optchain$tmp940153231$4,"--mafs-user-transform":"translate(0, 0)"}),children:visible&&children})})})})})})}function XLabels($jscomp$destructuring$var8){var {separation,labelMaker}=$jscomp$destructuring$var8;const {viewTransform}=useTransformContext();({xPanes:$jscomp$destructuring$var8}=usePaneContext());return(0,import_jsx_runtime3.jsx)("g",{className:"mafs-axis",
children:$jscomp$destructuring$var8.map($jscomp$destructuring$var9=>{var [min,max]=$jscomp$destructuring$var9;return(0,import_jsx_runtime3.jsx)("g",{children:snappedRange(min,max,separation).filter(x=>Math.abs(x)>separation/1E6).map(x=>(0,import_jsx_runtime3.jsx)("text",{x:vec.transform([x,0],viewTransform)[0],y:5,dominantBaseline:"hanging",textAnchor:"middle",style:{fill:"var(--mafs-origin-color)",paintOrder:"stroke"},children:labelMaker(x)},x))},`${min},${max}`)})})}function YLabels($jscomp$destructuring$var10){var {separation,
labelMaker}=$jscomp$destructuring$var10;const {viewTransform}=useTransformContext();({yPanes:$jscomp$destructuring$var10}=usePaneContext());return(0,import_jsx_runtime3.jsx)("g",{className:"mafs-axis",children:$jscomp$destructuring$var10.map($jscomp$destructuring$var11=>{var [min,max]=$jscomp$destructuring$var11;return(0,import_jsx_runtime3.jsx)("g",{children:snappedRange(min,max,separation).filter(y=>Math.abs(y)>separation/1E6).map(y=>(0,import_jsx_runtime3.jsx)("text",{x:5,y:vec.transform([0,y],
viewTransform)[1],dominantBaseline:"central",style:{fill:"var(--mafs-origin-color)",paintOrder:"stroke"},children:labelMaker(y)},y))},`${min},${max}`)})})}function Cartesian($jscomp$destructuring$var12){var {xAxis:xAxisOverrides,yAxis:yAxisOverrides,subdivisions=!1}=$jscomp$destructuring$var12;$jscomp$destructuring$var12=!1!==xAxisOverrides;const yAxisEnabled=!1!==yAxisOverrides,xAxis=Object.assign({},{subdivisions},defaultAxisOptions,xAxisOverrides),yAxis=Object.assign({},{subdivisions},defaultAxisOptions,
yAxisOverrides),id=`cartesian-${incrementer++}`;var {viewTransform}=useTransformContext();const {xPaneRange,yPaneRange}=usePaneContext(),[xMin,xMax]=xPaneRange,[yMin,yMax]=yPaneRange,[vxMin,vyMin]=vec.transform([xMin,yMin],viewTransform),[vxMax,vyMax]=vec.transform([xMax,yMax],viewTransform),[unitW,unitH]=vec.transform([xAxis.lines||1,-(yAxis.lines||1)],viewTransform);viewTransform=xAxis.subdivisions||1;const ySubs=yAxis.subdivisions||1,subUnitW=unitW/viewTransform,subUnitH=unitH/ySubs;return(0,import_jsx_runtime4.jsxs)("g",
{fill:"none",children:[(0,import_jsx_runtime4.jsxs)("pattern",{x:0,y:0,width:unitW,height:unitH,id,patternUnits:"userSpaceOnUse",children:[(0,import_jsx_runtime4.jsx)("pattern",{width:subUnitW,height:subUnitH,id:`${id}-subdivision`,patternUnits:"userSpaceOnUse",children:(0,import_jsx_runtime4.jsxs)("g",{stroke:"var(--grid-line-subdivision-color)",children:[!1!==$jscomp$destructuring$var12&&1<viewTransform&&(0,import_jsx_runtime4.jsxs)(import_jsx_runtime4.Fragment,{children:[(0,import_jsx_runtime4.jsx)("line",
{x1:0,y1:0,x2:0,y2:subUnitH}),(0,import_jsx_runtime4.jsx)("line",{x1:subUnitW,y1:0,x2:subUnitW,y2:subUnitH})]}),!1!==yAxisEnabled&&1<ySubs&&(0,import_jsx_runtime4.jsxs)(import_jsx_runtime4.Fragment,{children:[(0,import_jsx_runtime4.jsx)("line",{x1:0,y1:0,x2:subUnitW,y2:0}),(0,import_jsx_runtime4.jsx)("line",{x1:0,y1:subUnitH,x2:subUnitW,y2:subUnitH})]})]})}),(0,import_jsx_runtime4.jsx)("rect",{width:unitW,height:unitH,fill:`url(#${id}-subdivision)`}),(0,import_jsx_runtime4.jsxs)("g",{stroke:"var(--mafs-line-color)",
children:[yAxisEnabled&&xAxis.lines&&(0,import_jsx_runtime4.jsxs)(import_jsx_runtime4.Fragment,{children:[(0,import_jsx_runtime4.jsx)("line",{x1:0,y1:0,x2:unitW,y2:0}),(0,import_jsx_runtime4.jsx)("line",{x1:0,y1:unitH,x2:unitW,y2:unitH})]}),$jscomp$destructuring$var12&&yAxis.lines&&(0,import_jsx_runtime4.jsxs)(import_jsx_runtime4.Fragment,{children:[(0,import_jsx_runtime4.jsx)("line",{x1:0,y1:0,x2:0,y2:unitH}),(0,import_jsx_runtime4.jsx)("line",{x1:unitW,y1:0,x2:unitW,y2:unitH})]})]})]}),(0,import_jsx_runtime4.jsx)("rect",
{x:vxMin,y:vyMax,width:vxMax-vxMin,height:vyMin-vyMax,fill:`url(#${id})`}),(0,import_jsx_runtime4.jsxs)("g",{stroke:"var(--mafs-origin-color)",children:[$jscomp$destructuring$var12&&xAxis.axis&&(0,import_jsx_runtime4.jsx)("line",{x1:vxMin,y1:0,x2:vxMax,y2:0}),yAxisEnabled&&yAxis.axis&&(0,import_jsx_runtime4.jsx)("line",{x1:0,y1:vyMin,x2:0,y2:vyMax})]}),(0,import_jsx_runtime4.jsxs)("g",{className:"mafs-shadow",children:[$jscomp$destructuring$var12&&xAxis.labels&&(0,import_jsx_runtime4.jsx)(XLabels,
{separation:xAxis.lines||1,labelMaker:xAxis.labels}),yAxisEnabled&&yAxis.labels&&(0,import_jsx_runtime4.jsx)(YLabels,{separation:yAxis.lines||1,labelMaker:yAxis.labels})]})]})}function snappedRange(min,max,step){min=Math.floor(min/step)*step;max=Math.ceil(max/step)*step;return min===max-step?[min]:range(min,max-step,step)}function autoPi(x){return 0===x?"0":.001>Math.abs(Math.PI-x)?"π":.001>Math.abs(-Math.PI-x)?"-π":`${round(x/Math.PI,5)}\u03C0`}function PolarCoordinates($jscomp$destructuring$var13){var {xAxis:xAxisOverrides,
yAxis:yAxisOverrides,lines=1,subdivisions}=$jscomp$destructuring$var13;$jscomp$destructuring$var13=!1!==xAxisOverrides;const yAxisEnabled=!1!==yAxisOverrides,xAxis=Object.assign({},defaultAxisOptions,xAxisOverrides),yAxis=Object.assign({},defaultAxisOptions,yAxisOverrides);var {viewTransform}=useTransformContext();const {xPaneRange,yPaneRange}=usePaneContext(),[xMin,xMax]=xPaneRange,[yMin,yMax]=yPaneRange;var distances=[vec.mag([xMin,yMin]),vec.mag([xMin,yMax]),vec.mag([xMax,yMin]),vec.mag([xMax,
yMax]),vec.mag([(xMin+xMax)/2,(yMin+yMax)/2])],minRadiusPrecise=Math.min(...distances)<Math.max(xMax-xMin,yMax-yMin)?0:Math.min(...distances);distances=Math.max(...distances);minRadiusPrecise=Math.floor(minRadiusPrecise/lines)*lines;const maxRadius=Math.ceil(distances/lines)*lines,[vxMin,vyMin]=vec.transform([xMin,yMin],viewTransform),[vxMax,vyMax]=vec.transform([xMax,yMax],viewTransform),[scaleX,scaleY]=vec.transform([1,-1],viewTransform);viewTransform=range(minRadiusPrecise,maxRadius,lines);minRadiusPrecise=
void 0!=subdivisions?range(minRadiusPrecise,maxRadius,lines/subdivisions):[];return(0,import_jsx_runtime5.jsxs)("g",{fill:"none",children:[(0,import_jsx_runtime5.jsx)("g",{stroke:"var(--grid-line-subdivision-color)",children:thetas.map(theta=>(0,import_jsx_runtime5.jsx)("line",{x1:0,y1:0,x2:Math.cos(theta)*maxRadius*scaleX,y2:-Math.sin(theta)*maxRadius*scaleY},theta))}),minRadiusPrecise.map(r=>(0,import_jsx_runtime5.jsx)("ellipse",{"data-r":r,cx:0,cy:0,rx:r*scaleX,ry:r*scaleY,stroke:"var(--grid-line-subdivision-color)"},
r)),viewTransform.map(r=>(0,import_jsx_runtime5.jsx)("ellipse",{"data-r":r,cx:0,cy:0,rx:r*scaleX,ry:r*scaleY,stroke:"var(--mafs-line-color)"},r)),(0,import_jsx_runtime5.jsxs)("g",{stroke:"var(--mafs-origin-color)",children:[$jscomp$destructuring$var13&&xAxis.axis&&(0,import_jsx_runtime5.jsx)("line",{x1:vxMin,y1:0,x2:vxMax,y2:0}),yAxisEnabled&&yAxis.axis&&(0,import_jsx_runtime5.jsx)("line",{x1:0,y1:vyMin,x2:0,y2:vyMax})]}),(0,import_jsx_runtime5.jsxs)("g",{className:"mafs-shadow",children:[$jscomp$destructuring$var13&&
xAxis.labels&&(0,import_jsx_runtime5.jsx)(XLabels,{separation:(null==xAxisOverrides?void 0:xAxisOverrides.lines)||lines||1,labelMaker:xAxis.labels||defaultLabelMaker}),yAxisEnabled&&yAxis.labels&&(0,import_jsx_runtime5.jsx)(YLabels,{separation:(null==yAxisOverrides?void 0:yAxisOverrides.lines)||lines||1,labelMaker:yAxis.labels||defaultLabelMaker})]})]})}function adaptiveSampling(xy,t,minSamplingDepth,maxSamplingDepth,errorThreshold){function subdivide(min,max,pushLeft,pushRight,depth,xyMinX2,xyMinY2,
xyMaxX2,xyMaxY2){const mid=min+.5*(max-min),[xyMidX,xyMidY]=xy(mid);if(depth<minSamplingDepth)subdivide(min,mid,!0,!1,depth+1,xyMinX2,xyMinY2,xyMidX,xyMidY),subdivide(mid,max,!1,!0,depth+1,xyMidX,xyMidY,xyMaxX2,xyMaxY2);else{if(depth<maxSamplingDepth){const xyLerpMid=vec.lerp([xyMinX2,xyMinY2],[xyMaxX2,xyMaxY2],.5);if(vec.squareDist([xyMidX,xyMidY],xyLerpMid)>errorThreshold){subdivide(min,mid,!0,!1,depth+1,xyMinX2,xyMinY2,xyMidX,xyMidY);subdivide(mid,max,!1,!0,depth+1,xyMidX,xyMidY,xyMaxX2,xyMaxY2);
return}}pushLeft&&Number.isFinite(xyMinX2)&&Number.isFinite(xyMinY2)&&(result+=`${xyMinX2} ${xyMinY2} L `);Number.isFinite(xyMidX)&&Number.isFinite(xyMidY)&&(result+=`${xyMidX} ${xyMidY} L `);pushRight&&Number.isFinite(xyMaxX2)&&Number.isFinite(xyMaxY2)&&(result+=`${xyMaxX2} ${xyMaxY2} L `)}}let result="M ";const [tMin,tMax]=t,[xyMinX,xyMinY]=xy(tMin),[xyMaxX,xyMaxY]=xy(tMax);subdivide(tMin,tMax,!0,!0,0,xyMinX,xyMinY,xyMaxX,xyMaxY);return result.substring(0,result.length-2)}function Parametric($jscomp$destructuring$var14){var {xy,
t,color,style="solid",weight=2,opacity=1,maxSamplingDepth=14,minSamplingDepth=8,svgPathProps={}}=$jscomp$destructuring$var14;({viewTransform:$jscomp$destructuring$var14}=useTransformContext());$jscomp$destructuring$var14=-vec.det($jscomp$destructuring$var14);const [tMin,tMax]=t,errorThreshold=.1/$jscomp$destructuring$var14;$jscomp$destructuring$var14=React8.useMemo(()=>adaptiveSampling(xy,[tMin,tMax],minSamplingDepth,maxSamplingDepth,errorThreshold),[xy,minSamplingDepth,maxSamplingDepth,errorThreshold,
tMin,tMax]);return(0,import_jsx_runtime6.jsx)("path",Object.assign({},{d:$jscomp$destructuring$var14,strokeWidth:weight,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===style?"1,10":void 0},svgPathProps,{style:Object.assign({},{stroke:color||"var(--mafs-fg)",strokeOpacity:opacity,vectorEffect:"non-scaling-stroke",transform:"var(--mafs-view-transform)"},svgPathProps.style||{})}))}function generateOpacityLayers(opacityGrainularity){const layers=[];opacityGrainularity=
1/opacityGrainularity;for(let i=1;0<i;i-=opacityGrainularity)layers.push({d:"",opacity:i});return layers}function ThroughPoints($jscomp$destructuring$var24){var {point1,point2,color=Theme.foreground,style="solid",weight=2,opacity=1}=$jscomp$destructuring$var24;const {viewTransform,userTransform}=useTransformContext();var transform=vec.matrixMult(viewTransform,userTransform);const segment=vec.scale(vec.normalize(vec.sub(point2,point1)),1E5);$jscomp$destructuring$var24=vec.transform(vec.sub(point1,
segment),transform);transform=vec.transform(vec.add(point2,segment),transform);return(0,import_jsx_runtime9.jsx)("line",{x1:round($jscomp$destructuring$var24[0],2),y1:round($jscomp$destructuring$var24[1],2),x2:round(transform[0],2),y2:round(transform[1],2),style:{stroke:color},strokeWidth:weight,opacity,strokeDasharray:"dashed"===style?"4,3":void 0})}function PointAngle($jscomp$destructuring$var25){var $jscomp$destructuring$var27=Object.assign({},$jscomp$destructuring$var25),point=$jscomp$destructuring$var25.point;
$jscomp$destructuring$var25=$jscomp$destructuring$var25.angle;$jscomp$destructuring$var27=(delete $jscomp$destructuring$var27.point,delete $jscomp$destructuring$var27.angle,$jscomp$destructuring$var27);$jscomp$destructuring$var25=vec.add(point,vec.rotate([1,0],$jscomp$destructuring$var25));return(0,import_jsx_runtime10.jsx)(ThroughPoints,Object.assign({},{point1:point,point2:$jscomp$destructuring$var25},$jscomp$destructuring$var27))}function Ellipse($jscomp$destructuring$var32){var {center,radius,
angle=0,strokeStyle="solid",strokeOpacity=1,weight=2,color=Theme.foreground,fillOpacity=.15,svgEllipseProps={}}=$jscomp$destructuring$var32;const {viewTransform:toPx,userTransform}=useTransformContext();$jscomp$destructuring$var32=vec.matrixBuilder().translate(...center).mult(userTransform).scale(1,-1).mult(toPx).scale(1,-1).get();$jscomp$destructuring$var32=`
    ${vec.toCSS($jscomp$destructuring$var32)}
    rotate(${180/Math.PI*angle})
  `;return(0,import_jsx_runtime13.jsx)("ellipse",Object.assign({},{cx:0,cy:0,rx:radius[0],ry:radius[1],strokeWidth:weight,strokeDasharray:"dashed"===strokeStyle?"4,3":void 0,transform:$jscomp$destructuring$var32},svgEllipseProps,{style:Object.assign({},{stroke:color,fill:color,fillOpacity,strokeOpacity,vectorEffect:"non-scaling-stroke"},svgEllipseProps.style||{})}))}function Circle($jscomp$destructuring$var33){var $jscomp$destructuring$var35=Object.assign({},$jscomp$destructuring$var33);$jscomp$destructuring$var33=
$jscomp$destructuring$var33.radius;$jscomp$destructuring$var35=(delete $jscomp$destructuring$var35.radius,$jscomp$destructuring$var35);return(0,import_jsx_runtime14.jsx)(Ellipse,Object.assign({},{radius:[$jscomp$destructuring$var33,$jscomp$destructuring$var33]},$jscomp$destructuring$var35))}function Polygon($jscomp$destructuring$var36){var {points,color=Theme.foreground,weight=2,fillOpacity=.15,strokeOpacity=1,strokeStyle="solid",svgPolygonProps={}}=$jscomp$destructuring$var36;const {userTransform}=
useTransformContext();$jscomp$destructuring$var36=points.map(point=>vec.transform(point,userTransform).join(" ")).join(" ");return(0,import_jsx_runtime15.jsx)("polygon",Object.assign({},{points:$jscomp$destructuring$var36,strokeWidth:weight,fillOpacity,strokeDasharray:"dashed"===strokeStyle?"4,3":void 0,strokeLinejoin:"round"},svgPolygonProps,{style:Object.assign({},{fill:color,fillOpacity,stroke:color,strokeOpacity,vectorEffect:"non-scaling-stroke",transform:"var(--mafs-view-transform)"},svgPolygonProps.style||
{})}))}function Point($jscomp$destructuring$var37){var {x,y,color=Theme.foreground,opacity=1,svgCircleProps={}}=$jscomp$destructuring$var37;const {viewTransform:pixelMatrix,userTransform:transform}=useTransformContext(),[cx,cy]=vec.transform([x,y],vec.matrixMult(pixelMatrix,transform));return(0,import_jsx_runtime16.jsx)("circle",Object.assign({},{cx,cy,r:6},svgCircleProps,{style:Object.assign({},{fill:color,opacity},svgCircleProps.style)}))}function Vector($jscomp$destructuring$var38){var {tail=[0,
0],tip,color=Theme.foreground,weight=2,style="solid",opacity=1,svgLineProps={}}=$jscomp$destructuring$var38;const {userTransform,viewTransform}=useTransformContext();var combinedTransform=vec.matrixMult(viewTransform,userTransform);$jscomp$destructuring$var38=vec.transform(tail,combinedTransform);combinedTransform=vec.transform(tip,combinedTransform);const id=React10.useMemo(()=>`mafs-triangle-${incrementer2++}`,[]);return(0,import_jsx_runtime17.jsxs)(import_jsx_runtime17.Fragment,{children:[(0,import_jsx_runtime17.jsx)("defs",
{children:(0,import_jsx_runtime17.jsx)("marker",{id,markerWidth:"8",markerHeight:"8",refX:"8",refY:"4",orient:"auto",children:(0,import_jsx_runtime17.jsx)("path",{d:"M 0 0 L 8 4 L 0 8 z",fill:color||"var(--mafs-fg)"})})}),(0,import_jsx_runtime17.jsx)("line",Object.assign({},{x1:$jscomp$destructuring$var38[0],y1:$jscomp$destructuring$var38[1],x2:combinedTransform[0],y2:combinedTransform[1],strokeWidth:weight,markerEnd:`url(#${id})`,strokeDasharray:"dashed"===style?"4,3":void 0},svgLineProps,{style:Object.assign({},
{stroke:color||"var(--mafs-fg)",strokeOpacity:opacity},(null==svgLineProps?void 0:svgLineProps.style)||{},{vectorEffect:"non-scaling-stroke"})}))]})}function Text($jscomp$destructuring$var39){var {children,x,y,color,size=30,svgTextProps={},attach,attachDistance=0}=$jscomp$destructuring$var39;const {viewTransform:pixelMatrix,userTransform:transformContext}=useTransformContext();var xOffset=0;$jscomp$destructuring$var39="middle";if(null==attach?0:attach.includes("w"))$jscomp$destructuring$var39="end",
xOffset=-1;else if(null==attach?0:attach.includes("e"))$jscomp$destructuring$var39="start",xOffset=1;let yOffset=0,dominantBaseline="middle";if(null==attach?0:attach.includes("n"))dominantBaseline="baseline",yOffset=1;else if(null==attach?0:attach.includes("s"))dominantBaseline="hanging",yOffset=-1;let [pixelX,pixelY]=[0,0];if(0!==xOffset||0!==yOffset)[pixelX,pixelY]=vec.withMag([xOffset,yOffset],attachDistance);xOffset=vec.transform([x,y],vec.matrixMult(pixelMatrix,transformContext));return(0,import_jsx_runtime18.jsx)("text",
Object.assign({},{x:xOffset[0]+pixelX,y:xOffset[1]+pixelY,fontSize:size,dominantBaseline,textAnchor:$jscomp$destructuring$var39,style:{fill:color||"var(--mafs-fg)",vectorEffect:"non-scaling-stroke"},className:"mafs-shadow"},svgTextProps,{children}))}function MovablePoint($jscomp$destructuring$var40){var {point,onMove,constrain=point2=>point2,color=Theme.pink}=$jscomp$destructuring$var40;const {viewTransform,userTransform}=useTransformContext(),{xSpan,ySpan}=useSpanContext(),inverseViewTransform=vec.matrixInvert(viewTransform);
(0,import_tiny_invariant5.default)(inverseViewTransform,"The view transform must be invertible.");const inverseTransform=React11.useMemo(()=>{const invert=vec.matrixInvert(userTransform);(0,import_tiny_invariant5.default)(null!==invert,"Could not invert transform matrix. Your movable point's transformation matrix might be degenerative (mapping 2D space to a line).");return invert},[userTransform]);$jscomp$destructuring$var40=React11.useMemo(()=>vec.matrixMult(viewTransform,userTransform),[viewTransform,
userTransform]);const [dragging,setDragging]=React11.useState(!1),[displayX,displayY]=vec.transform(point,$jscomp$destructuring$var40),pickup=React11.useRef([0,0]);$jscomp$destructuring$var40=React11.useRef(null);(0,import_react2.useDrag)(state=>{const {type,event}=state;null==event||event.stopPropagation();if(type.includes("key")){null==event||event.preventDefault();const {direction:yDownDirection,altKey,metaKey,shiftKey}=state;state=[yDownDirection[0],-yDownDirection[1]];var span=Math.abs(state[0])?
xSpan:ySpan;let divisions=50;if(altKey||metaKey)divisions=200;shiftKey&&(divisions=10);const min=span/(2*divisions);span=range(span/divisions,span/2,span/divisions);for(var dx of span)if(span=vec.scale(state,dx),span=constrain(vec.transform(vec.add(vec.transform(point,userTransform),span),inverseTransform)),vec.dist(span,point)>min){onMove(span);break}}else{const {last,movement:pixelMovement,first}=state;setDragging(!last);first&&(pickup.current=vec.transform(point,userTransform));0!==vec.mag(pixelMovement)&&
(dx=vec.transform(pixelMovement,inverseViewTransform),onMove(constrain(vec.transform(vec.add(pickup.current,dx),inverseTransform))))}},{target:$jscomp$destructuring$var40,eventOptions:{passive:!1}});return(0,import_jsx_runtime19.jsxs)("g",{ref:$jscomp$destructuring$var40,style:{"--movable-point-color":color,"--movable-point-ring-size":"15px"},className:`mafs-movable-point ${dragging?"mafs-movable-point-dragging":""}`,tabIndex:0,children:[(0,import_jsx_runtime19.jsx)("circle",{className:"mafs-movable-point-hitbox",
r:30,cx:displayX,cy:displayY}),(0,import_jsx_runtime19.jsx)("circle",{className:"mafs-movable-point-focus",r:16,cx:displayX,cy:displayY}),(0,import_jsx_runtime19.jsx)("circle",{className:"mafs-movable-point-ring",r:15,cx:displayX,cy:displayY}),(0,import_jsx_runtime19.jsx)("circle",{className:"mafs-movable-point-point",r:6,cx:displayX,cy:displayY})]})}function useMovablePoint(initialPoint,$jscomp$destructuring$var41){var {constrain,color=Theme.pink}=void 0===$jscomp$destructuring$var41?{}:$jscomp$destructuring$var41;
const [initialX,initialY]=initialPoint,[point,setPoint]=React12.useState(initialPoint),[x,y]=point,constraintFunction=React12.useMemo(()=>"horizontal"===constrain?$jscomp$destructuring$var42=>{[$jscomp$destructuring$var42]=$jscomp$destructuring$var42;return[$jscomp$destructuring$var42,initialY]}:"vertical"===constrain?$jscomp$destructuring$var43=>{[,$jscomp$destructuring$var43]=$jscomp$destructuring$var43;return[initialX,$jscomp$destructuring$var43]}:"function"===typeof constrain?constrain:$jscomp$destructuring$var44=>
{var [x2,y2]=$jscomp$destructuring$var44;return[x2,y2]},[constrain,initialX,initialY]);initialPoint=React12.useMemo(()=>(0,import_jsx_runtime20.jsx)(MovablePoint,Object.assign({},{point,color},{constrain:constraintFunction,onMove:setPoint})),[point,color,constraintFunction]);return{x,y,point:[x,y],element:initialPoint,setPoint}}function useStopwatch(options){const {startTime=0,endTime=Infinity}=options||{},startClockTime=React13.useRef(null),[time,setTime]=React13.useState(startTime),[playing,setPlaying]=
React13.useState(!1);React13.useEffect(()=>{function tick(now){now/=1E3;startClockTime.current||(startClockTime.current=now);now-=startClockTime.current;now>=endTime?(startClockTime.current=null,setTime(endTime),setPlaying(!1)):(setTime(Math.min(now,endTime)),request=window.requestAnimationFrame(tick))}let request=-1;playing?request=window.requestAnimationFrame(tick):window.cancelAnimationFrame(request);return()=>window.cancelAnimationFrame(request)},[playing,endTime]);options=React13.useCallback(()=>
setPlaying(!0),[]);const stop=React13.useCallback(()=>{startClockTime.current=null;setPlaying(!1);setTime(startTime)},[startTime]);return{time,setTime:time2=>setTime(1E3*time2),start:options,stop}}function Transform(props){const {userTransform,viewTransform}=useTransformContext();var builder=vec.matrixBuilder(),$jscomp$destructuring$var46=Object.assign({},props);const matrix=props.matrix;props=props.children;$jscomp$destructuring$var46=(delete $jscomp$destructuring$var46.matrix,delete $jscomp$destructuring$var46.children,
$jscomp$destructuring$var46);matrix&&(builder=builder.mult(matrix));for(const $jscomp$destructuring$var47 of Object.entries($jscomp$destructuring$var46)){const [name,value]=$jscomp$destructuring$var47;if(null!=value)switch(name){case "translate":builder=builder.translate(...value);break;case "scale":builder="number"===typeof value?builder.scale(value,value):builder.scale(...value);break;case "shear":builder=builder.shear(...value);break;case "rotate":builder=builder.rotate(value)}}builder=builder.mult(userTransform);
builder=builder.get();return(0,import_jsx_runtime21.jsx)(TransformContext.Provider,{value:{userTransform:builder,viewTransform},children:(0,import_jsx_runtime21.jsx)("g",{style:{"--mafs-user-transform":vec.toCSS(builder)},children:props})})}var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__copyProps=(to,from,except,
desc)=>{if(from&&"object"===typeof from||"function"===typeof from)for(let key of __getOwnPropNames(from))__hasOwnProp.call(to,key)||key===except||__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});return to},__toESM=(mod,isNodeMode,target)=>(target=null!=mod?__create(__getProtoOf(mod)):{},__copyProps(!isNodeMode&&mod&&mod.__esModule?target:__defProp(target,"default",{value:mod,enumerable:!0}),mod)),src_exports={};((target,all)=>{for(var name in all)__defProp(target,
name,{get:all[name],enumerable:!0})})(src_exports,{Circle:()=>Circle,Coordinates:()=>Coordinates,Debug:()=>Debug,Ellipse:()=>Ellipse,Line:()=>Line,Mafs:()=>Mafs,MovablePoint:()=>MovablePoint,Plot:()=>Plot,Point:()=>Point,Polygon:()=>Polygon,Text:()=>Text,Theme:()=>Theme,Transform:()=>Transform,Vector:()=>Vector,labelPi:()=>autoPi,useMovablePoint:()=>useMovablePoint,usePaneContext:()=>usePaneContext,useStopwatch:()=>useStopwatch,useTransformContext:()=>useTransformContext,vec:()=>vec});module.exports=
(mod=>__copyProps(__defProp({},"__esModule",{value:!0}),mod))(src_exports);var React7=__toESM(require("module$node_modules$react$index")),React=__toESM(require("module$node_modules$react$index")),import_tiny_invariant=__toESM(require("module$node_modules$tiny_invariant$dist$tiny_invariant_cjs")),CoordinateContext=React.createContext(null);CoordinateContext.displayName="CoordinateContext";var CoordinateContext_default=CoordinateContext,React2=__toESM(require("module$node_modules$react$index")),import_jsx_runtime=
require("module$node_modules$react$jsx_runtime"),{round:round2,ceil,floor,log2}=Math,PaneContext=React2.createContext({xPanes:[],yPanes:[],xPaneRange:[0,0],yPaneRange:[0,0]});PaneContext.displayName="PaneContext";PaneManager.displayName="PaneManager";var PaneContext_default=PaneManager,import_use_resize_observer=__toESM(require("module$node_modules$use_resize_observer$dist$bundle_cjs")),import_react=require("module$node_modules$$use_gesture$react$dist$use_gesture_react_cjs"),vec;(vec2=>{function add(v,
v2){return[v[0]+v2[0],v[1]+v2[1]]}function sub(v,v2){return[v[0]-v2[0],v[1]-v2[1]]}function mag(v){return Math.sqrt(v[0]*v[0]+v[1]*v[1])}function lerp(v1,v2,t){v2=sub(v2,v1);const m=mag(v2);return add(v1,withMag(v2,t*m))}function withMag(v,m){const magnitude=mag(v);return scale(v,m/magnitude)}function scale(v,sc){return[v[0]*sc,v[1]*sc]}function matrixMult(m,m2){return matrixCreate(m[0]*m2[0]+m[1]*m2[3],m[3]*m2[0]+m[4]*m2[3],m[0]*m2[1]+m[1]*m2[4],m[3]*m2[1]+m[4]*m2[4],m[0]*m2[2]+m[1]*m2[5]+m[2],m[3]*
m2[2]+m[4]*m2[5]+m[5])}function rotate(v,a){const c=Math.cos(a);a=Math.sin(a);return[v[0]*c-v[1]*a,v[0]*a+v[1]*c]}function squareDist(v,v2){return Math.pow(v2[0]-v[0],2)+Math.pow(v2[1]-v[1],2)}function det(m){return m[0]*m[4]-m[3]*m[1]}function matrixBuilder(m){const _m=(void 0===m?null:m)||matrixCreate();return{mult:m2=>matrixBuilder(matrixMult(m2,_m)),translate:(x,y)=>matrixBuilder(matrixMult(matrixCreate(1,0,0,1,x,y),_m)),rotate:a=>{const c=Math.cos(a);a=Math.sin(a);return matrixBuilder(matrixMult(matrixCreate(c,
a,-a,c),_m))},scale:(x,y)=>matrixBuilder(matrixMult(matrixCreate(x,0,0,y),_m)),shear:(x,y)=>matrixBuilder(matrixMult(matrixCreate(1,y,x,1),_m)),get:()=>[..._m]}}vec2.add=add;vec2.sub=sub;vec2.mag=mag;vec2.normal=function(v){return[-v[1],v[0]]};vec2.lerp=lerp;vec2.withMag=withMag;vec2.normalize=function(v){return withMag(v,1)};vec2.scale=scale;vec2.transform=function(v,m){return[v[0]*m[0]+v[1]*m[1]+m[2],v[0]*m[3]+v[1]*m[4]+m[5]]};vec2.matrixMult=matrixMult;vec2.rotate=rotate;vec2.rotateAbout=function(v,
cp,a){v=sub(v,cp);return add(cp,rotate(v,a))};vec2.midpoint=function(v,v2){return lerp(v,v2,.5)};vec2.dist=function(v,v2){return Math.sqrt(squareDist(v,v2))};vec2.squareDist=squareDist;vec2.dot=function(v,v2){return v[0]*v2[0]+v[1]*v2[1]};vec2.det=det;vec2.matrixInvert=function(a){var mDet=det(a);if(!mDet)return null;mDet=1/mDet;const a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4];a=a[5];return matrixCreate(mDet*a11,mDet*-a10,mDet*-a01,mDet*a00,mDet*(a*a01-a02*a11),mDet*(-a*a00+a02*a10))};vec2.matrixBuilder=
matrixBuilder;vec2.toCSS=function(matrix){const [a,c,tx,b,d,ty]=matrix;return`matrix(${a}, ${b}, ${c}, ${d}, ${tx}, ${ty})`};vec2.identity=matrixBuilder().get()})(vec||(vec={}));var React3=__toESM(require("module$node_modules$react$index")),import_tiny_invariant2=__toESM(require("module$node_modules$tiny_invariant$dist$tiny_invariant_cjs")),TransformContext=React3.createContext(null);TransformContext.displayName="TransformContext";var React4=__toESM(require("module$node_modules$react$index")),import_tiny_invariant3=
__toESM(require("module$node_modules$tiny_invariant$dist$tiny_invariant_cjs")),SpanContext=React4.createContext({xSpan:0,ySpan:0});SpanContext.displayName="SpanContext";var import_tiny_invariant4=__toESM(require("module$node_modules$tiny_invariant$dist$tiny_invariant_cjs")),React5=__toESM(require("module$node_modules$react$index")),React6=__toESM(require("module$node_modules$react$index")),import_jsx_runtime2=require("module$node_modules$react$jsx_runtime");Mafs.displayName="Mafs";var import_jsx_runtime3=
require("module$node_modules$react$jsx_runtime"),defaultLabelMaker=x=>(0,import_jsx_runtime3.jsxs)(import_jsx_runtime3.Fragment,{children:[x,0>x&&(0,import_jsx_runtime3.jsx)("tspan",{visibility:"hidden",children:"-"})]}),defaultAxisOptions={axis:!0,lines:1,labels:defaultLabelMaker};XLabels.displayName="CartesianCoordinates.XLabels";YLabels.displayName="CartesianCoordinates.YLabels";var import_jsx_runtime4=require("module$node_modules$react$jsx_runtime"),incrementer=0,import_jsx_runtime5=require("module$node_modules$react$jsx_runtime"),
thetas=range(0,2*Math.PI,Math.PI/12);PolarCoordinates.displayName="Coordinates.Polar";Cartesian.displayName="Coordinates.Cartesian";var Coordinates={Cartesian,Polar:PolarCoordinates},React9=__toESM(require("module$node_modules$react$index")),React8=__toESM(require("module$node_modules$react$index")),import_jsx_runtime6=require("module$node_modules$react$jsx_runtime"),import_jsx_runtime7=require("module$node_modules$react$jsx_runtime"),Theme={foreground:"var(--mafs-fg)",background:"var(--mafs-bg)",
red:"var(--mafs-red)",orange:"var(--mafs-orange)",green:"var(--mafs-green)",blue:"var(--mafs-blue)",indigo:"var(--mafs-indigo)",violet:"var(--mafs-violet)",pink:"var(--mafs-pink)",yellow:"var(--mafs-yellow)"},import_jsx_runtime8=require("module$node_modules$react$jsx_runtime"),xyOpacityDefault=()=>1,Plot={OfX:function($jscomp$destructuring$var15){var $jscomp$destructuring$var17=Object.assign({},$jscomp$destructuring$var15),y=$jscomp$destructuring$var15.y;$jscomp$destructuring$var15=(delete $jscomp$destructuring$var17.y,
$jscomp$destructuring$var17);const {xPaneRange:[xMin,xMax]}=usePaneContext();$jscomp$destructuring$var17=React9.useCallback(x=>[x,y(x)],[y]);const t=React9.useMemo(()=>[xMin,xMax],[xMin,xMax]);return(0,import_jsx_runtime7.jsx)(Parametric,Object.assign({},{xy:$jscomp$destructuring$var17,t},$jscomp$destructuring$var15))},OfY:function($jscomp$destructuring$var18){var $jscomp$destructuring$var20=Object.assign({},$jscomp$destructuring$var18),x=$jscomp$destructuring$var18.x;$jscomp$destructuring$var18=
(delete $jscomp$destructuring$var20.x,$jscomp$destructuring$var20);const {yPaneRange:[yMin,yMax]}=usePaneContext();$jscomp$destructuring$var20=React9.useCallback(y=>[x(y),y],[x]);const t=React9.useMemo(()=>[yMin,yMax],[yMin,yMax]);return(0,import_jsx_runtime7.jsx)(Parametric,Object.assign({},{xy:$jscomp$destructuring$var20,t},$jscomp$destructuring$var18))},Parametric,VectorField:function($jscomp$destructuring$var21){function fieldForRegion(xMin,xMax,yMin,yMax){for(xMin=Math.floor(xMin);xMin<=Math.ceil(xMax);xMin+=
step)for(let y=Math.floor(yMin);y<=Math.ceil(yMax);y+=step){var tail=[xMin,y],trueOffset=xy([xMin,y]),trueMag=vec.mag(trueOffset);trueMag=vec.scale(vec.normalize(trueOffset),Math.min(trueMag,.75*step));trueOffset=vec.add(tail,trueMag);tail=vec.transform(tail,pixelMatrix);trueMag=vec.transform(trueMag,pixelMatrix);var pixelSize=vec.mag(trueMag);trueOffset=vec.transform(trueOffset,pixelMatrix);pixelSize=vec.scale(vec.normalize(trueMag),Math.min(pixelSize,5));trueMag=vec.add(trueOffset,vec.rotate(pixelSize,
5/6*Math.PI));pixelSize=vec.add(trueOffset,vec.rotate(pixelSize,-(5/6)*Math.PI));var trueOpacity=xyOpacity([xMin,y]);var JSCompiler_inline_result=layers;trueOpacity=Math.min(Math.max(trueOpacity,0),1);JSCompiler_inline_result=JSCompiler_inline_result[JSCompiler_inline_result.length-1-Math.round(trueOpacity*(JSCompiler_inline_result.length-1))];JSCompiler_inline_result.d+=` M ${tail[0]} ${tail[1]} L ${trueOffset[0]} ${trueOffset[1]}  L ${trueMag[0]} ${trueMag[1]}  L ${pixelSize[0]} ${pixelSize[1]}  L ${trueOffset[0]} ${trueOffset[1]} `}}
var {xy,step=1,xyOpacity=xyOpacityDefault,opacityStep=xyOpacity===xyOpacityDefault?1:.2,color=Theme.foreground}=$jscomp$destructuring$var21;const {viewTransform:pixelMatrix}=useTransformContext(),{xPanes,yPanes}=usePaneContext();opacityStep=Math.min(1,Math.max(.01,opacityStep));const layers=generateOpacityLayers(Math.ceil(1/opacityStep));for(const $jscomp$destructuring$var22 of xPanes){const [xMin,xMax]=$jscomp$destructuring$var22;for(const $jscomp$destructuring$var23 of yPanes){const [yMin,yMax]=
$jscomp$destructuring$var23;fieldForRegion(xMin,xMax,yMin,yMax)}}return(0,import_jsx_runtime8.jsx)(import_jsx_runtime8.Fragment,{children:layers.map((layer,index)=>(0,import_jsx_runtime8.jsx)("path",{d:layer.d,style:{stroke:color,fill:color,opacity:layer.opacity,fillOpacity:layer.opacity,strokeOpacity:layer.opacity},strokeLinecap:"round",strokeLinejoin:"round"},index))})}};Plot.OfX.displayName="Plot.OfX";Plot.OfY.displayName="Plot.OfY";Plot.Parametric.displayName="Plot.Parametric";Plot.VectorField.displayName=
"Plot.VectorField";var import_jsx_runtime9=require("module$node_modules$react$jsx_runtime"),import_jsx_runtime10=require("module$node_modules$react$jsx_runtime"),import_jsx_runtime11=require("module$node_modules$react$jsx_runtime"),import_jsx_runtime12=require("module$node_modules$react$jsx_runtime"),Line={PointAngle,PointSlope:function($jscomp$destructuring$var28){var $jscomp$destructuring$var30=Object.assign({},$jscomp$destructuring$var28),point=$jscomp$destructuring$var28.point;$jscomp$destructuring$var28=
$jscomp$destructuring$var28.slope;$jscomp$destructuring$var30=(delete $jscomp$destructuring$var30.point,delete $jscomp$destructuring$var30.slope,$jscomp$destructuring$var30);return(0,import_jsx_runtime11.jsx)(PointAngle,Object.assign({},{point,angle:Math.atan($jscomp$destructuring$var28)},$jscomp$destructuring$var30))},ThroughPoints,Segment:function($jscomp$destructuring$var31){var {point1,point2,color=Theme.foreground,style="solid",weight=2,opacity=1}=$jscomp$destructuring$var31;const {viewTransform:pixelMatrix,
userTransform}=useTransformContext();var transform=vec.matrixMult(pixelMatrix,userTransform);$jscomp$destructuring$var31=vec.transform(point1,transform);transform=vec.transform(point2,transform);return(0,import_jsx_runtime12.jsx)("line",{x1:round($jscomp$destructuring$var31[0],2),y1:round($jscomp$destructuring$var31[1],2),x2:round(transform[0],2),y2:round(transform[1],2),style:{stroke:color},strokeWidth:weight,opacity,strokeDasharray:"dashed"===style?"1,10":void 0})}};Line.PointAngle.displayName=
"Line.PointAngle";Line.PointSlope.displayName="Line.PointSlope";Line.Segment.displayName="Line.Segment";Line.ThroughPoints.displayName="Line.ThroughPoints";var import_jsx_runtime13=require("module$node_modules$react$jsx_runtime");Ellipse.displayName="Ellipse";var import_jsx_runtime14=require("module$node_modules$react$jsx_runtime");Circle.displayName="Circle";var import_jsx_runtime15=require("module$node_modules$react$jsx_runtime");Polygon.displayName="Polygon";var import_jsx_runtime16=require("module$node_modules$react$jsx_runtime");
Point.displayName="Point";var React10=__toESM(require("module$node_modules$react$index")),import_jsx_runtime17=require("module$node_modules$react$jsx_runtime"),incrementer2=0;Vector.displayName="Vector";var import_jsx_runtime18=require("module$node_modules$react$jsx_runtime");Text.displayName="Text";var import_react2=require("module$node_modules$$use_gesture$react$dist$use_gesture_react_cjs"),React11=__toESM(require("module$node_modules$react$index")),import_tiny_invariant5=__toESM(require("module$node_modules$tiny_invariant$dist$tiny_invariant_cjs")),
import_jsx_runtime19=require("module$node_modules$react$jsx_runtime");MovablePoint.displayName="MovablePoint";var React12=__toESM(require("module$node_modules$react$index")),import_jsx_runtime20=require("module$node_modules$react$jsx_runtime"),React13=__toESM(require("module$node_modules$react$index")),import_jsx_runtime21=require("module$node_modules$react$jsx_runtime");Transform.displayName="Transform";var import_jsx_runtime22=require("module$node_modules$react$jsx_runtime"),import_jsx_runtime23=
require("module$node_modules$react$jsx_runtime"),Debug={ViewportInfo:function($jscomp$destructuring$var48){({precision:$jscomp$destructuring$var48=3}=$jscomp$destructuring$var48);const {xMin,xMax,yMin,yMax}=useCoordinateContext();var {viewTransform}=useTransformContext();const {xPanes,yPanes}=usePaneContext(),[x,y]=vec.transform([xMin,yMin],viewTransform);viewTransform=xPanes.map(pane=>`(${pane.join(", ")})`).join("   ");const yPanesString=yPanes.map(pane=>`(${pane.join(", ")})`).join("   ");return(0,import_jsx_runtime22.jsxs)("g",
{className:"mafs-shadow",fontFamily:"monospace",children:[(0,import_jsx_runtime22.jsxs)("text",{x:x+10,y:y-70,children:["x: (",xMin.toFixed($jscomp$destructuring$var48),", ",xMax.toFixed($jscomp$destructuring$var48),")"]}),(0,import_jsx_runtime22.jsxs)("text",{x:x+10,y:y-50,children:["y: (",yMin.toFixed($jscomp$destructuring$var48),", ",yMax.toFixed($jscomp$destructuring$var48),")"]}),(0,import_jsx_runtime22.jsxs)("text",{x:x+10,y:y-30,children:["xPanes: ",viewTransform]}),(0,import_jsx_runtime22.jsxs)("text",
{x:x+10,y:y-10,children:["yPanes: ",yPanesString]})]})},TransformWidget:function($jscomp$destructuring$var49){({children:$jscomp$destructuring$var49}=$jscomp$destructuring$var49);const t=useMovablePoint([0,0]),s=useMovablePoint([1,1],{color:Theme.blue}),r=useMovablePoint([1,0],{color:Theme.green,constrain:p=>vec.normalize(p)});return(0,import_jsx_runtime23.jsxs)(import_jsx_runtime23.Fragment,{children:[(0,import_jsx_runtime23.jsxs)(Transform,{translate:t.point,children:[(0,import_jsx_runtime23.jsxs)(Transform,
{rotate:Math.atan2(r.point[1],r.point[0]),children:[(0,import_jsx_runtime23.jsxs)(Transform,{scale:s.point,children:[$jscomp$destructuring$var49,(0,import_jsx_runtime23.jsx)(Polygon,{points:[[0,0],[0,1],[1,1],[1,0]],color:Theme.blue})]}),(0,import_jsx_runtime23.jsx)(Circle,{center:[0,0],radius:1,strokeStyle:"dashed",strokeOpacity:.5,fillOpacity:0,color:Theme.green}),s.element]}),r.element]}),t.element]})}};Debug.ViewportInfo.displayName="Debug.ViewportInfo";Debug.TransformWidget.displayName="Debug.TransformWidget"}
//# sourceMappingURL=module$node_modules$mafs$build$index.js.map
